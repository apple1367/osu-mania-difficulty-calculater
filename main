import sys
import os.path
import shutil

if not os.path.exists("./TEMP/texted"):
    os.makedirs("./TEMP/texted")
if not os.path.exists("./TEMP/collection"):
    os.makedirs("./TEMP/collection")
 #디렉토리 생성

def get_files(location,lists):
    
    if __name__ == "__main__":
        root_dir = location
        for (root, dirs, files) in os.walk(root_dir):
            if len(files) > 0:
                for file_name in files:
                    lists.append(root + "/" + file_name)

file_list = []
get_files("./songs/",file_list)


file_list_osu = [file for file in file_list if file.endswith(".osu")]
for file in file_list_osu:
    shutil.copy(file, file + ".txt")
#오스 파일을 오스.txt 로 생성.

file_list_osu_txt = []
get_files("./Songs/",file_list_osu_txt)

file_list_txt = [file for file in file_list_osu_txt if file.endswith(".osu.txt")]


# del file_list_texted[0:]
# get_files("./TEMP/texted/",file_list_texted)
# #텍스트화되어 이미 있는 파일을 체크

for file in file_list_txt:
    shutil.move(file,"./TEMP/texted")
#파일을 이동.

file_list_texted = []
get_files("./TEMP/texted/",file_list_texted)

mania = "Mode: 3\n"

not_mania_files = []

for file in file_list_texted:
    osutxt_file = open(file,"r",encoding="utf8")
    osutxt_line = osutxt_file.readlines()
    for line in osutxt_line:
        line.rstrip('\n')

    if mania in osutxt_line:
        print("mania")
    else:
        print("{0} is not mania.".format(file))
        file_list_texted.remove(file)
        not_mania_files.append(file)
#마니아 모드인지 확인. 아니라면 마니아 아님 리스트에 추가.

print (file_list_texted)     





